\*Proyecto
Tema: Diseño e Implementación de una Arquitectura de Defensa Web de Múltiples Capas en AWS utilizando Balanceador de Carga, WAF y Firewall de Red
● Descripción detallada de lo que se pretende realizar:
Este proyecto consiste en el diseño e implementación de una arquitectura de seguridad web en capas utilizando servicios de AWS y contenedores Docker. Para el presente proyecto, construiremos un sistema completo que demuestre cómo proteger aplicaciones web mediante múltiples niveles de defensa en distintas capas, integrando tecnologías modernas de infraestructura como código con Terraform para el despliegue de la infraestructura.
La implementación se combinará en temas de servicios que nos ofrece AWS con: un balanceador de carga application layer de tipo ALB, servicio AWS WAF (Web Application Firewall) y servicio de Network Firewall. El objetivo principal es crear un ambiente seguro que pueda resistir ataques comunes en internet mientras mantiene alta disponibilidad y rendimiento para los usuarios simulando lo que sería un ambiente ya a nivel profesional para protección del aplicativo y de los usuarios. Construiremos una aplicación web simple protegida con un firewall de aplicaciones y desplegada en contenedores Docker. El presente proyecto se construirá mediante capas que contendrán los distintos niveles de la arquitectura de defensa que planeamos construir. Dichas capas se describen a continuación:
● Capa básica de Infraestructura en AWS:
Comenzaremos creando una red virtual en AWS (VPC) con subredes públicas y privadas. En la subred pública instalaremos un balanceador de carga (ALB) que reciba todo el tráfico de internet que venga del lado de los usuarios (Amazon Web Services, 2024a). En las subredes privadas ejecutaremos nuestra aplicación. Esta separación nos garantiza que la aplicación no sea accesible directamente desde internet, solo a través del balanceador. Además, configuraremos grupos de seguridad para controlar qué tráfico puede pasar entre los componentes.
● Capa de Protección a nivel de red con Firewall básico:
Para complementar la seguridad a nivel de aplicación, implementaremos un firewall básico de red. Estableceremos reglas para permitir únicamente el tráfico hacia nuestro balanceador de carga, bloqueando todos los demás puertos. Además, configuraremos reglas de salida para restringir el tráfico no autorizado desde nuestras subredes privadas hacia internet. Este firewall básico actuará como una primera línea de defensa, filtrando el tráfico antes de que llegue a nuestra aplicación.
● Capa de protección a nivel de aplicación WAF:
Para proteger a nivel de capa 7 (modelo OSI) nuestra aplicación, usaremos el servicio de AWS WAF (Web Application Firewall). Configuraremos reglas básicas que bloqueen ataques comunes como inyecciones SQL y scripts maliciosos. También pondremos un límite de peticiones por minuto desde una misma IP para prevenir ataques de fuerza bruta (Amazon Web Services, 2024b). El WAF se conectará directamente con el balanceador de carga, revisando todas las peticiones antes de que lleguen a nuestra aplicación para de esa manera asegurarnos de tener una barrera de protección entre la aplicación e Internet.
● Aplicación Web con Node.js:
Desarrollaremos una aplicación web simple usando JavaScript con Node.js. La aplicación tendrá una página principal que muestre información del proyecto y un formulario de búsqueda para probar las protecciones del WAF. Será una aplicación ligera que nos permita simplemente cumplir con los propósitos de validar las protecciones que estaremos estableciendo mediante el WAF y el Firewall de Red. Dicha aplicación será desplegada en instancias EC2 dentro de las subredes privadas.
● Contenerización con Docker
Empaquetaremos nuestra aplicación Node.js en un contenedor Docker usando una imagen base oficial de Node.js. Crearemos un Dockerfile simple que copie el código de la aplicación, instale las dependencias y ejecute el servidor para nuestra aplicación a manera de tener una imagen que permita instanciar nuestra aplicación simple de web. El contenedor será optimizado garantizando que la aplicación funcione consistentemente en cualquier entorno.
● Automatización con Terraform
Todo lo anterior lo automatizaremos con Terraform. Escribiremos un código que describa nuestra infraestructura de forma declarativa: la red, el balanceador y el WAF. Esto nos permitirá crear y destruir el ambiente completo con unos simples comandos (Hashicorp, 2023). Terraform se encargará de coordinar todos los servicios de AWS en el orden correcto y mantener el estado de lo desplegado.
● Pruebas
Finalmente, probaremos que todo funcione correctamente. Accederemos a la aplicación a través del balanceador y verificaremos que carga correctamente. Probaremos las protecciones intentando algunos ataques básicos como inyecciones SQL en el formulario de búsqueda para confirmar que el WAF los bloquea. También verificaremos que el balanceador distribuye el tráfico entre los diferentes contenedores correctamente. Por último intentaremos conexión
hacia puertos bloqueados para de igual forma validar la correcta protección a nivel de capa de red con el Firewall básico que implementaremos.
Objetivos
● Diseñar e implementar una arquitectura de seguridad web en capas utilizando servicios de AWS que nos permita proteger aplicaciones Web contra amenazas comunes a nivel de red y aplicación
● Integrar tecnologías modernas de infraestructura como código con Terraform y contenerización con Docker para el despliegue profesional de una arquitectura de red y aplicación
● Demostrar cómo los múltiples niveles de defensa pueden trabajar conjuntamente para crear un ambiente seguro para aplicaciones web mediante la ejecución de pruebas que validen el cumplimiento de los propósitos de nuestra arquitectura
● Configurar un balanceador de carga que reciba y distribuya todo el tráfico de internet hacia nuestra aplicación
● Implementar un AWS WAF con reglas básicas de seguridad que protejan a la aplicación contra ataques comunes como inyecciones SQL, scripts maliciosos y ataques de fuerza bruta.
● Establecer un firewall básico de red que actúe como primera línea de defensa filtrando el tráfico no autorizado hacia nuestra infraestructura, redirigiendo el tráfico hacia el balanceador de carga, bloqueando puertos no empleados e impidiendo acceso desde subredes privadas a Internet
Alcance del Proyecto
Para este proyecto, en nuestro alcance nos limitaremos a implementar una arquitectura básica pero completa de seguridad en capas. Construiremos haciendo uso de servicios de la nube de AWS una VPC con subredes públicas y privadas donde desplegaremos un balanceador en las subredes públicas y nuestra aplicación Web básica en las subredes privadas. Configuraremos AWS WAF con un conjunto básico de reglas que incluya protección contra SQL injection, Script maliciosos y ataques de fuerza bruta.
Posteriormente, implementaremos un firewall de red básico con reglas que restrinjan el tráfico únicamente a los puertos necesarios para el funcionamiento de la aplicación e impidiendo acceso desde subredes privadas a Internet Para la aplicación desarrollaremos una aplicación web simple en Node.js que contendrá una página principal informativa y un formulario de búsqueda para probar las protecciones esto solo con el objetivo de poder probar nuestra arquitectura de protección ya que el foco principal es validar las protecciones en la capa de red.
Empaquetaremos esta aplicación en contenedores Docker y automatizaremos toda la infraestructura usando Terraform, creando módulos para cada componente principal.
Finalmente, realizaremos pruebas de funcionalidad y seguridad para validar que todas las capas de protección estén operando correctamente y cumplamos con los objetivos de tener una arquitectura que permita defender nuestra aplicación contra amenazas comunes a nivel de capa de red y capa de aplicación.
Referencias:
● Amazon Web Services. (2024). Amazon Virtual Private Cloud (Amazon VPC): Guía del usuario. AWS Documentation. https://docs.aws.amazon.com/vpc/latest/userguide/
● Amazon Web Services. (2024). AWS WAF: Guía del desarrollador. AWS Documentation. https://docs.aws.amazon.com/waf/latest/developerguide/
● HashiCorp. (2023). Terraform: Infrastructure as Code. HashiCorp Documentation. https://developer.hashicorp.com/terraform/docs*/
